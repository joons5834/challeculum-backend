<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="companion.challeculum.domains.usermission.UserMissionDao">
    <!--Jonghyun-->
    <!--End of Jonghyun-->
    <!--Kiyoung-->
    <sql id="selectExtended">
        select um.id as id,
               user_id,
               mission_id,
               submit_at,
               is_accepted,
               image_url,
               ground_id,
               assignment,
               start_at,
               end_at
        from user_mission um
                 join user u on u.id = um.user_id
                 join mission m on m.id = um.mission_id
    </sql>
    <insert id="createUserMission" parameterType="userMission">
        insert into user_mission (user_id, mission_id, image_url)
            values (#{userId},#{missionId},#{imageUrl})
    </insert>
    <update id="updateUserMission" parameterType="userMission">
        update user_mission
        set mission_id=#{missionId},
            submit_at=#{submitAt},
            is_accepted=#{isAccepted},
            image_url=#{imageUrl}
        where user_id = #{userId}
    </update>

    <select id="getUserMissionByUserId" resultType="userMission">
        select * from user_mission where user_id = #{userId} and mission_id=#{missionId};
    </select>


    <!--    <select id="getUserMatchByUserId" parameterType="map" resultType="UserMissionDTO">-->
    <!--        select-->
    <!--        from usser_mission um-->

    <!--    </select>-->
    <!--    <update id="updateMission" parameterType="UserMissionDTO">-->


    <!--    </update>-->
    <!--End of Kiyoung-->


    <!--Sojeong-->
    <!--End of Sojeong-->

    <!--Hwajun-->
    <!--End of Hwajun-->

    <!--HyunJoon-->
    <!--End of Hyunjoon-->
</mapper>

